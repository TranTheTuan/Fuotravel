<div class="border-bottom p-2">
  <app-comment-form [commentableType]="commentableType" [commentableId]="commentableId" (newCommentEvent)="addComment($event)"></app-comment-form>
</div>
<ul style="list-style: none">
  <li *ngFor="let comment of comments">
    <p>{{ comment.content }}</p>
    <div *ngIf="comment.image">
      <img src="{{ comment.image | imageUrl }}" height="200" width="200" alt="comment-image">
    </div>
    {{ comment.vote }}
    <button (click)="vote(comment.id, _COMMENT, _UP)" mat-icon-button>
      <mat-icon>thumb_up</mat-icon>
    </button>
    <button (click)="vote(comment.id, _COMMENT, _DOWN)" mat-icon-button>
      <mat-icon>thumb_down</mat-icon>
    </button>
    <ul *ngIf="comment.replies.length > 0" style="list-style: none">
      <li *ngFor="let reply of comment.replies">
        <p>{{ reply.content }}</p>
        {{ reply.vote }}
        <button (click)="vote(reply.id, _COMMENT, _UP)" mat-icon-button>
          <mat-icon>thumb_up</mat-icon>
        </button>
        <button (click)="vote(reply.id, _COMMENT, _DOWN)" mat-icon-button>
          <mat-icon>thumb_down</mat-icon>
        </button>
      </li>
    </ul>
    <app-reply-form [parentId]="comment.id" [commentableType]="commentableType" [commentableId]="commentableId" (newReplyEvent)="addReply($event)"></app-reply-form>
  </li>
</ul>
